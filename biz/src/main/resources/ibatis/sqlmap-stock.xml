<?xml version="1.0" encoding="GB2312"?>
<!DOCTYPE sqlMap
	PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
	"http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="stock">
	
	<typeAlias alias="stock" type="com.hsh24.dms.api.stock.bo.Stock" />
	
	<select id="getStats" parameterClass="stock" resultClass="stock">
	<![CDATA[
		SELECT SUM(t.goods_num * g.sales_price) AS amount
		  FROM oms.wm_account_t t
		  LEFT JOIN oms.main_goods_v g ON g.goods_id= t.goods_id
		   AND g.goods_spec_id = t.goods_spec_id
		   AND g.goods_mode = t.goods_mode
		  LEFT JOIN oms.main_warehouse_t w ON w.warehouse_id = t.warehouse_id
		 WHERE w.org_id = #shopId#
	]]>
	</select>
	
	<select id="getStockList" parameterClass="stock" resultClass="stock">
	<![CDATA[
		SELECT g.goods_nm AS itemName,
			   t.goods_num AS stock,
			   g.sales_price AS price,
			   (t.goods_num * g.sales_price) AS amount
		  FROM oms.wm_account_t t
		  LEFT JOIN oms.main_goods_v g ON g.goods_id = t.goods_id
		   AND g.goods_spec_id = t.goods_spec_id
		   AND g.goods_mode = t.goods_mode
		  LEFT JOIN oms.main_warehouse_t w ON w.warehouse_id = t.warehouse_id
		 WHERE w.org_id = #shopId#
	]]>
	</select>
	
</sqlMap>